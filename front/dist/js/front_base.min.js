function FrontBase(){}function Auth(){this.maskWrapper=$(".mask-wrapper"),this.scrollWrapper=$(".scroll-wrapper")}FrontBase.prototype.run=function(){this.listenAuthBoxHover()},FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},Auth.prototype.run=function(){var t=this;t.listenShowHide(),t.listenSwitchEvent(),t.listenSigninEvent(),t.listenImgCaptchaEvent(),t.listenSmsCaptchaEvent(),t.listenSignupEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.smsSuccessEvent=function(){var t=this,n=$(".sms-captcha-btn");n.addClass("disable");var e=59;n.unbind("click");var a=setInterval(function(){n.text(e+"s"),--e<=0&&(clearInterval(a),n.removeClass("disable"),n.text("发送验证码"),t.listenSmsCaptchaEvent())},1e3)},Auth.prototype.listenShowHide=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),a=$(".close-btn");$(".scroll-wrapper");n.click(function(){t.showEvent(),t.scrollWrapper.css({left:0})}),e.click(function(){t.showEvent(),t.scrollWrapper.css({left:-400})}),a.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listenImgCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.listenSmsCaptchaEvent=function(){var n=this,t=$(".sms-captcha-btn"),e=$(".signup-group input[name='telephone']");t.click(function(){var t=e.val();t||console.log("没有message文件~"),xfzajax.get({url:"/account/sms_captcha/",data:{telephone:t},success:function(t){200==t.code&&n.smsSuccessEvent()},fail:function(t){console.log(t)}})})},Auth.prototype.listenSigninEvent=function(){var a=this,t=$(".signin-group"),s=t.find("input[name='telephone']"),i=t.find("input[name='password']"),o=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=s.val(),n=i.val(),e=o.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){a.hideEvent(),window.location.reload(),console.log("登陆成功")}})})},Auth.prototype.listenSignupEvent=function(){var f=$(".signup-group");f.find(".submit-btn").click(function(t){t.preventDefault();var n=f.find("input[name='telephone']"),e=f.find("input[name='username']"),a=f.find("input[name='img_captcha']"),s=f.find("input[name='password1']"),i=f.find("input[name='password2']"),o=f.find("input[name='sms_captcha']"),c=n.val(),r=e.val(),p=a.val(),u=s.val(),l=i.val(),h=o.val();xfzajax.post({url:"/account/register/",data:{telephone:c,username:r,img_captcha:p,password1:u,password2:l,sms_captcha:h},success:function(t){console.log("注册成功")}})})},$(function(){(new Auth).run()}),$(function(){(new FrontBase).run()}),$(function(){window.template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t),e=n.getTime(),a=((new Date).getTime()-e)/1e3;return a<60?"刚刚":60<=a&&a<3600?(minutes=parseInt(a/60),minutes+"分钟前"):3600<=a&&a<86400?(hours=parseInt(a/60/60),hours+"小时前"):86400<=a&&a<2592e3?(days=parseInt(a/60/60/24),days+"天前"):n.getFullYear()+"/"+n.getMonth()+"/"+n.getDate()+" "+n.getHours()+":"+n.getMinutes()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInRoaXMiLCJtYXNrV3JhcHBlciIsIiQiLCJzY3JvbGxXcmFwcGVyIiwicHJvdG90eXBlIiwicnVuIiwibGlzdGVuQXV0aEJveEhvdmVyIiwiYXV0aEJveCIsInVzZXJNb3JlQm94IiwiaG92ZXIiLCJzaG93IiwiaGlkZSIsInNlbGYiLCJsaXN0ZW5TaG93SGlkZSIsImxpc3RlblN3aXRjaEV2ZW50IiwibGlzdGVuU2lnbmluRXZlbnQiLCJsaXN0ZW5JbWdDYXB0Y2hhRXZlbnQiLCJsaXN0ZW5TbXNDYXB0Y2hhRXZlbnQiLCJsaXN0ZW5TaWdudXBFdmVudCIsInNob3dFdmVudCIsImhpZGVFdmVudCIsInNtc1N1Y2Nlc3NFdmVudCIsInNtc0NhcHRjaGEiLCJhZGRDbGFzcyIsImNvdW50IiwidW5iaW5kIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsInRleHQiLCJjbGVhckludGVydmFsIiwicmVtb3ZlQ2xhc3MiLCJzaWduaW5CdG4iLCJzaWdudXBCdG4iLCJjbG9zZUJ0biIsImNsaWNrIiwiY3NzIiwibGVmdCIsImN1cnJlbnRMZWZ0IiwicGFyc2VJbnQiLCJhbmltYXRlIiwiaW1nQ2FwdGNoYSIsImF0dHIiLCJNYXRoIiwicmFuZG9tIiwidGVsZXBob25lSW5wdXQiLCJ0ZWxlcGhvbmUiLCJ2YWwiLCJjb25zb2xlIiwibG9nIiwieGZ6YWpheCIsImdldCIsInVybCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0IiwiZmFpbCIsImVycm9yIiwic2lnbmluR3JvdXAiLCJmaW5kIiwicGFzc3dvcmRJbnB1dCIsInJlbWVtYmVySW5wdXQiLCJwYXNzd29yZCIsInJlbWVtYmVyIiwicHJvcCIsInBvc3QiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsInNpZ251cEdyb3VwIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJuYW1lSW5wdXQiLCJpbWdDYXB0Y2hhSW5wdXQiLCJwYXNzd29yZDFJbnB1dCIsInBhc3N3b3JkMklucHV0Iiwic21zQ2FwdGNoYUlucHV0IiwidXNlcm5hbWUiLCJwYXNzd29yZDEiLCJwYXNzd29yZDIiLCJpbWdfY2FwdGNoYSIsInNtc19jYXB0Y2hhIiwidGVtcGxhdGUiLCJkZWZhdWx0cyIsImltcG9ydHMiLCJ0aW1lU2luY2UiLCJkYXRlVmFsdWUiLCJkYXRlIiwiRGF0ZSIsImRhdGVzIiwiZ2V0VGltZSIsInRpbWVzdGFtcCIsIm1pbnV0ZXMiLCJob3VycyIsImRheXMiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyJdLCJtYXBwaW5ncyI6IkFBQ0EsU0FBU0EsYUFvQlQsU0FBU0MsT0FDTUMsS0FDTkMsWUFBY0MsRUFBRSxpQkFEVkYsS0FFTkcsY0FBZ0JELEVBQUUsbUJBbkIzQkosVUFBVU0sVUFBVUMsSUFBTSxXQUNYTCxLQUNOTSxzQkFHVFIsVUFBVU0sVUFBVUUsbUJBQXFCLFdBQ3JDLElBQUlDLEVBQVVMLEVBQUUsYUFDWk0sRUFBY04sRUFBRSxrQkFDcEJLLEVBQVFFLE1BQU0sV0FDVkQsRUFBWUUsUUFDYixXQUNDRixFQUFZRyxVQVdwQlosS0FBS0ssVUFBVUMsSUFBTSxXQUNqQixJQUFJTyxFQUFPWixLQUVYWSxFQUFLQyxpQkFDTEQsRUFBS0Usb0JBQ0xGLEVBQUtHLG9CQUNMSCxFQUFLSSx3QkFDTEosRUFBS0ssd0JBQ0xMLEVBQUtNLHFCQUVUbkIsS0FBS0ssVUFBVWUsVUFBWSxXQUNabkIsS0FDTkMsWUFBWVMsUUFFckJYLEtBQUtLLFVBQVVnQixVQUFZLFdBQ1pwQixLQUNOQyxZQUFZVSxRQUVyQlosS0FBS0ssVUFBVWlCLGdCQUFrQixXQUM3QixJQUFJVCxFQUFPWixLQUVQc0IsRUFBYXBCLEVBQUUsb0JBQ25Cb0IsRUFBV0MsU0FBUyxXQUNwQixJQUFJQyxFQUFRLEdBQ1pGLEVBQVdHLE9BQU8sU0FDbEIsSUFBSUMsRUFBUUMsWUFBWSxXQUNwQkwsRUFBV00sS0FB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QUNKUCxVQUFhQSxFQUNiK0IsU0FBWUEsRUFDWkcsWUFBZXZDLEVBQ2ZxQyxVQUFhQSxFQUNiQyxVQUFhQSxFQUNiRSxZQUFlMUQsR0FFbkIrQixRQUFXLFNBQVVDLEdBRWpCUCxRQUFRQyxJQUFJLGNBTzVCOUMsRUFBRSxZQUNhLElBQUlILE1BQ1ZNLFFBR1RILEVBQUUsWUFDa0IsSUFBSUosV0FDVk8sUUFHZEgsRUFBRSxXQUNNK0QsT0FBT2dCLFdBQ1BBLFNBQVNDLFNBQVNDLFFBQVFDLFVBQVksU0FBVUMsR0FDNUMsSUFBSUMsRUFBTyxJQUFJQyxLQUFLRixHQUNoQkcsRUFBUUYsRUFBS0csVUFFYkMsSUFEUSxJQUFLSCxNQUFRRSxVQUNBRCxHQUFTLElBQ2xDLE9BQUlFLEVBQVksR0FDTCxLQUNhLElBQWJBLEdBQW1CQSxFQUFZLE1BQ3RDQyxRQUFVckQsU0FBU29ELEVBQVksSUFDeEJDLFFBQVUsT0FDRyxNQUFiRCxHQUF3QkEsRUFBWSxPQUMzQ0UsTUFBUXRELFNBQVNvRCxFQUFZLEdBQUssSUFDM0JFLE1BQVEsT0FDSyxPQUFiRixHQUE2QkEsRUFBWSxRQUNoREcsS0FBT3ZELFNBQVNvRCxFQUFZLEdBQUssR0FBSyxJQUMvQkcsS0FBTyxNQUVIUCxFQUFLUSxjQUtGLElBSkZSLEVBQUtTLFdBSVcsSUFIbEJULEVBQUtVLFVBR3lCLElBRjdCVixFQUFLVyxXQUVxQyxJQUR4Q1gsRUFBS1kiLCJmaWxlIjoiZnJvbnRfYmFzZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL+eUqOadpeWkhOeQhuWvvOiIquadoeeahFxyXG5mdW5jdGlvbiBGcm9udEJhc2UoKSB7XHJcblxyXG59XHJcblxyXG5Gcm9udEJhc2UucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGlzdGVuQXV0aEJveEhvdmVyKCk7XHJcbn07XHJcblxyXG5Gcm9udEJhc2UucHJvdG90eXBlLmxpc3RlbkF1dGhCb3hIb3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhdXRoQm94ID0gJCgnLmF1dGgtYm94Jyk7XHJcbiAgICB2YXIgdXNlck1vcmVCb3ggPSAkKCcudXNlci1tb3JlLWJveCcpO1xyXG4gICAgYXV0aEJveC5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXNlck1vcmVCb3guc2hvdygpO1xyXG4gICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHVzZXJNb3JlQm94LmhpZGUoKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuLy/lpITnkIbnmbvpmYblkozms6jlhoxcclxuZnVuY3Rpb24gQXV0aCgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIgPSAkKCcubWFzay13cmFwcGVyJyk7XHJcbiAgICBzZWxmLnNjcm9sbFdyYXBwZXIgPSAkKFwiLnNjcm9sbC13cmFwcGVyXCIpO1xyXG59XHJcblxyXG5BdXRoLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgc2VsZi5saXN0ZW5TaG93SGlkZSgpO1xyXG4gICAgc2VsZi5saXN0ZW5Td2l0Y2hFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TaWduaW5FdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5JbWdDYXB0Y2hhRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuU21zQ2FwdGNoYUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblNpZ251cEV2ZW50KCk7XHJcbn07XHJcbkF1dGgucHJvdG90eXBlLnNob3dFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIuc2hvdygpXHJcbn07XHJcbkF1dGgucHJvdG90eXBlLmhpZGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIuaGlkZSgpXHJcbn07XHJcbkF1dGgucHJvdG90eXBlLnNtc1N1Y2Nlc3NFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIC8vY29uc29sZS5sb2coJ+WPkemAgeaIkOWKn++8gScpO1xyXG4gICAgdmFyIHNtc0NhcHRjaGEgPSAkKCcuc21zLWNhcHRjaGEtYnRuJyk7XHJcbiAgICBzbXNDYXB0Y2hhLmFkZENsYXNzKCdkaXNhYmxlJyk7XHJcbiAgICB2YXIgY291bnQgPSA1OTtcclxuICAgIHNtc0NhcHRjaGEudW5iaW5kKCdjbGljaycpO1xyXG4gICAgdmFyIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNtc0NhcHRjaGEudGV4dChjb3VudCArICdzJyk7XHJcbiAgICAgICAgY291bnQtLTtcclxuICAgICAgICBpZiAoY291bnQgPD0gMCkge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcclxuICAgICAgICAgICAgc21zQ2FwdGNoYS5yZW1vdmVDbGFzcygnZGlzYWJsZScpO1xyXG4gICAgICAgICAgICBzbXNDYXB0Y2hhLnRleHQoJ+WPkemAgemqjOivgeeggScpO1xyXG4gICAgICAgICAgICBzZWxmLmxpc3RlblNtc0NhcHRjaGFFdmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIDEwMDApO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2hvd0hpZGUgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHNpZ25pbkJ0biA9ICQoJy5zaWduaW4tYnRuJyk7XHJcbiAgICB2YXIgc2lnbnVwQnRuID0gJCgnLnNpZ251cC1idG4nKTtcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcclxuICAgIHZhciBzY3JvbGxXcmFwcGVyID0gJCgnLnNjcm9sbC13cmFwcGVyJyk7XHJcbiAgICBzaWduaW5CdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XHJcbiAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyh7XCJsZWZ0XCI6IDB9KTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICBzaWdudXBCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XHJcbiAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyh7XCJsZWZ0XCI6IC00MDB9KTtcclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICB9KVxyXG59O1xyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5Td2l0Y2hFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzd2l0Y2hlciA9ICQoXCIuc3dpdGNoXCIpO1xyXG4gICAgc3dpdGNoZXIuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50TGVmdCA9IHNlbGYuc2Nyb2xsV3JhcHBlci5jc3MoXCJsZWZ0XCIpO1xyXG4gICAgICAgIGN1cnJlbnRMZWZ0ID0gcGFyc2VJbnQoY3VycmVudExlZnQpO1xyXG4gICAgICAgIGlmIChjdXJyZW50TGVmdCA8IDApIHtcclxuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOiAnMCd9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuYW5pbWF0ZSh7XCJsZWZ0XCI6IFwiLTQwMHB4XCJ9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlbkltZ0NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBpbWdDYXB0Y2hhID0gJCgnLmltZy1jYXB0Y2hhJyk7XHJcbiAgICBpbWdDYXB0Y2hhLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpbWdDYXB0Y2hhLmF0dHIoXCJzcmNcIiwgXCIvYWNjb3VudC9pbWdfY2FwdGNoYS9cIiArIFwiP3JhbmRvbT1cIiArIE1hdGgucmFuZG9tKCkpXHJcbiAgICB9KTtcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNtc0NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzbXNDYXB0Y2hhID0gJCgnLnNtcy1jYXB0Y2hhLWJ0bicpO1xyXG4gICAgdmFyIHRlbGVwaG9uZUlucHV0ID0gJChcIi5zaWdudXAtZ3JvdXAgaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XHJcbiAgICBzbXNDYXB0Y2hhLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgaWYgKCF0ZWxlcGhvbmUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ+ayoeaciW1lc3NhZ2Xmlofku7Z+JylcclxuICAgICAgICB9XHJcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9hY2NvdW50L3Ntc19jYXB0Y2hhLycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6IHRlbGVwaG9uZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNtc1N1Y2Nlc3NFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZmFpbCc6IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaWduaW5FdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzaWduaW5Hcm91cCA9ICQoJy5zaWduaW4tZ3JvdXAnKTtcclxuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKTtcclxuICAgIHZhciBwYXNzd29yZElucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkJ11cIik7XHJcbiAgICB2YXIgcmVtZW1iZXJJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdyZW1lbWJlciddXCIpO1xyXG5cclxuICAgIHZhciBzdWJtaXRCdG4gPSBzaWduaW5Hcm91cC5maW5kKFwiLnN1Ym1pdC1idG5cIik7XHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQgPSBwYXNzd29yZElucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciByZW1lbWJlciA9IHJlbWVtYmVySW5wdXQucHJvcChcImNoZWNrZWRcIik7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvYWNjb3VudC9sb2dpbi8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmUsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzd29yZCxcclxuICAgICAgICAgICAgICAgICdyZW1lbWJlcic6IHJlbWVtYmVyID8gMSA6IDAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5oaWRlRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfnmbvpmYbmiJDlip8nKVxyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2lnbnVwRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc2lnbnVwR3JvdXAgPSAkKCcuc2lnbnVwLWdyb3VwJyk7XHJcbiAgICB2YXIgc3VibWl0QnRuID0gc2lnbnVwR3JvdXAuZmluZCgnLnN1Ym1pdC1idG4nKTtcclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKTtcclxuICAgICAgICB2YXIgdXNlcm5hbWVJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd1c2VybmFtZSddXCIpO1xyXG5cclxuICAgICAgICB2YXIgaW1nQ2FwdGNoYUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J2ltZ19jYXB0Y2hhJ11cIik7XHJcblxyXG4gICAgICAgIHZhciBwYXNzd29yZDFJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZDEnXVwiKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQySW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQyJ11cIik7XHJcbiAgICAgICAgdmFyIHNtc0NhcHRjaGFJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdzbXNfY2FwdGNoYSddXCIpO1xyXG5cclxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHVzZXJuYW1lID0gdXNlcm5hbWVJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgaW1nQ2FwdGNoYSA9IGltZ0NhcHRjaGFJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQxID0gcGFzc3dvcmQxSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMiA9IHBhc3N3b3JkMklucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBzbXNDYXB0Y2hhID0gc21zQ2FwdGNoYUlucHV0LnZhbCgpO1xyXG5cclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9hY2NvdW50L3JlZ2lzdGVyLycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6IHRlbGVwaG9uZSxcclxuICAgICAgICAgICAgICAgICd1c2VybmFtZSc6IHVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgJ2ltZ19jYXB0Y2hhJzogaW1nQ2FwdGNoYSxcclxuICAgICAgICAgICAgICAgICdwYXNzd29yZDEnOiBwYXNzd29yZDEsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQyJzogcGFzc3dvcmQyLFxyXG4gICAgICAgICAgICAgICAgJ3Ntc19jYXB0Y2hhJzogc21zQ2FwdGNoYSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAvL3dpbmRvd3MubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5rOo5YaM5oiQ5YqfJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhdXRoID0gbmV3IEF1dGgoKTtcclxuICAgIGF1dGgucnVuKCk7XHJcbn0pO1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZnJvbnRCYXNlID0gbmV3IEZyb250QmFzZSgpO1xyXG4gICAgZnJvbnRCYXNlLnJ1bigpO1xyXG59KTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHdpbmRvdy50ZW1wbGF0ZSkge1xyXG4gICAgICAgIHRlbXBsYXRlLmRlZmF1bHRzLmltcG9ydHMudGltZVNpbmNlID0gZnVuY3Rpb24gKGRhdGVWYWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRhdGVWYWx1ZSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlcyA9IGRhdGUuZ2V0VGltZSgpOy8v5b6X5Yiw55qE5piv5q+r56eSXHJcbiAgICAgICAgICAgIHZhciBub3d0cyA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7Ly9cclxuICAgICAgICAgICAgdmFyIHRpbWVzdGFtcCA9IChub3d0cyAtIGRhdGVzKSAvIDEwMDA7XHJcbiAgICAgICAgICAgIGlmICh0aW1lc3RhbXAgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwi5Yia5YiaXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGltZXN0YW1wID49IDYwICYmIHRpbWVzdGFtcCA8IDYwICogNjApIHtcclxuICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBwYXJzZUludCh0aW1lc3RhbXAgLyA2MCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWludXRlcyArIFwi5YiG6ZKf5YmNXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGltZXN0YW1wID49IDYwICogNjAgJiYgdGltZXN0YW1wIDwgNjAgKiA2MCAqIDI0KSB7XHJcbiAgICAgICAgICAgICAgICBob3VycyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwIC8gNjApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhvdXJzICsgJ+Wwj+aXtuWJjSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGltZXN0YW1wID49IDYwICogNjAgKiAyNCAmJiB0aW1lc3RhbXAgPCA2MCAqIDYwICogMjQgKiAzMCkge1xyXG4gICAgICAgICAgICAgICAgZGF5cyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwIC8gNjAgLyAyNCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF5cyArIFwi5aSp5YmNXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgICAgIHZhciBtb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcclxuICAgICAgICAgICAgICAgIHZhciBkYXkgPSBkYXRlLmdldERhdGUoKTtcclxuICAgICAgICAgICAgICAgIHZhciBob3VyID0gZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHllYXIgKyAnLycgKyBtb250aCArICcvJyArIGRheSArIFwiIFwiICsgaG91ciArICc6JyArIG1pbnV0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSk7Il19
