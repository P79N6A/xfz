function Banners(){}Banners.prototype.createBannerItem=function(n){var t=this,e=template("banner-item",{banner:n}),a=$(".banner-list-group"),r=null;r=n?(a.append(e),a.find(".banner-item:last")):(a.prepend(e),a.find(".banner-item:first")),t.addImageSelect(r),t.addRemoveBannerEvent(r),t.addSaveBannerEvent(r)},Banners.prototype.loadData=function(){var r=this;xfzajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code)for(var t=n.data,e=0;e<t.length;e++){var a=t[e];r.createBannerItem(a)}}})},Banners.prototype.listenAddBannerEvent=function(){var n=this;$("#add-banners-btn").click(function(){6<=$(".banner-list-group").children().length?swal({title:"最多只能添加6张轮播图！",timer:1100,showConfirmButton:!1}):n.createBannerItem()})},Banners.prototype.addImageSelect=function(n){var e=n.find(".thumbnail"),t=n.find(".image-input");e.click(function(){t.click()}),t.change(function(){var n=this.files[0],t=new FormData;t.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:t,processData:!1,contentType:!1,success:function(n){if(200===n.code){var t=n.data.url;e.attr("src",t)}}})})},Banners.prototype.addRemoveBannerEvent=function(t){t.find(".close-btn").click(function(){var n=t.attr("data-banner-id");n?swal({title:"提示",text:"您确定删除这个轮播图吗？",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确定删除！",closeOnConfirm:!1},function(){xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:n},success:function(n){200===n.code?(t.remove(),swal("删除！","该轮播图删除成功！","success")):swal({title:n.message,timer:1200,showConfirmButton:!1})}})}):t.remove()})},Banners.prototype.addSaveBannerEvent=function(a){var n=a.find(".save-btn"),r=a.find(".thumbnail"),i=a.find("input[name='priority']"),o=a.find("input[name='link_to']"),s=a.find('span[class="priority"]'),c=a.attr("data-banner-id"),d="";d=c?"/cms/edit_banner/":"/cms/add_banner/",n.click(function(){var n=r.attr("src"),t=i.val(),e=o.val();xfzajax.post({url:d,data:{priority:t,img_url:n,link_to:e,pk:c},success:function(n){200===n.code?(c?swal({title:"轮播图修改成功！",type:"success"}):(c=n.data.banner_id,a.attr("data-banner-id",c),swal({title:"添加成功!",type:"success"})),s.text("优先级:"+t)):console.log(n.message)}})})},Banners.prototype.run=function(){this.listenAddBannerEvent(),this.loadData()},$(function(){(new Banners).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lcnMuanMiXSwibmFtZXMiOlsiQmFubmVycyIsInByb3RvdHlwZSIsImNyZWF0ZUJhbm5lckl0ZW0iLCJiYW5uZXIiLCJzZWxmIiwidGhpcyIsInRwbCIsInRlbXBsYXRlIiwiYmFubmVyTGlzdEdyb3VwIiwiJCIsImJhbm5lckl0ZW0iLCJhcHBlbmQiLCJmaW5kIiwicHJlcGVuZCIsImFkZEltYWdlU2VsZWN0IiwiYWRkUmVtb3ZlQmFubmVyRXZlbnQiLCJhZGRTYXZlQmFubmVyRXZlbnQiLCJsb2FkRGF0YSIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJzdWNjZXNzIiwicmVzdWx0IiwiYmFubmVycyIsImkiLCJsZW5ndGgiLCJsaXN0ZW5BZGRCYW5uZXJFdmVudCIsImNsaWNrIiwiY2hpbGRyZW4iLCJzd2FsIiwidGl0bGUiLCJ0aW1lciIsInNob3dDb25maXJtQnV0dG9uIiwiaW1hZ2UiLCJpbWFnZUlucHV0IiwiY2hhbmdlIiwiZmlsZSIsImZpbGVzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsInBvc3QiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsImF0dHIiLCJiYW5uZXJJZCIsInRleHQiLCJ0eXBlIiwic2hvd0NhbmNlbEJ1dHRvbiIsImNvbmZpcm1CdXR0b25Db2xvciIsImNvbmZpcm1CdXR0b25UZXh0IiwiY2xvc2VPbkNvbmZpcm0iLCJiYW5uZXJfaWQiLCJyZW1vdmUiLCJzYXZlQnRuIiwiaW1hZ2VUYWciLCJwcmlvcml0eVRhZyIsImxpbmt0b1RhZyIsInByaW9yaXR5U3BhbiIsImltZ191cmwiLCJwcmlvcml0eSIsInZhbCIsImxpbmtfdG8iLCJwayIsImNvbnNvbGUiLCJsb2ciLCJydW4iXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFdBSVRBLFFBQVFDLFVBQVVDLGlCQUFtQixTQUFVQyxHQUMzQyxJQUFJQyxFQUFPQyxLQUVQQyxFQUFNQyxTQUFTLGNBQWUsQ0FBQ0osT0FBVUEsSUFFekNLLEVBQWtCQyxFQUFF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RUFFQWhCLEtBQUssQ0FBQ0MsTUFBTyxXQUFZaUIsS0FBTSxhQUcvQkYsRUFBV3ZCLEVBQWEsS0FBYSxVQUNyQ1osRUFBV2tDLEtBQUssaUJBQWtCQyxHQUNsQ2hCLEtBQUssQ0FBQ0MsTUFBTyxRQUFTaUIsS0FBTSxhQUdoQ1csRUFBYVosS0FBSyxPQUFTYyxJQUUzQkksUUFBUUMsSUFBSTNDLEVBQWdCLGVBUWhEdEIsUUFBUUMsVUFBVWlFLElBQU0sV0FDcEI3RCxLQUFLcUIsdUJBQ0xyQixLQUFLWSxZQUdUUixFQUFFLFlBQ2dCLElBQUlULFNBQ1ZrRSIsImZpbGUiOiJiYW5uZXJzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEJhbm5lcnMoKSB7XHJcblxyXG59XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5jcmVhdGVCYW5uZXJJdGVtID0gZnVuY3Rpb24gKGJhbm5lcikge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgLy/liJvlu7rmqKHmnb9cclxuICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcImJhbm5lci1pdGVtXCIsIHsnYmFubmVyJzogYmFubmVyfSk7XHJcbiAgICAvL+Wwhuaooeadv+WKoOWFpeagh+etvuWGhVxyXG4gICAgdmFyIGJhbm5lckxpc3RHcm91cCA9ICQoXCIuYmFubmVyLWxpc3QtZ3JvdXBcIik7XHJcbiAgICB2YXIgYmFubmVySXRlbSA9IG51bGw7XHJcbiAgICBpZiAoYmFubmVyKSB7XHJcbiAgICAgICAgLy/lrZjlnKhiYW5uZXLlr7nosaHlsLHmt7vliqDliLDmnIDlkI5cclxuICAgICAgICBiYW5uZXJMaXN0R3JvdXAuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgYmFubmVySXRlbSA9IGJhbm5lckxpc3RHcm91cC5maW5kKFwiLmJhbm5lci1pdGVtOmxhc3RcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJhbm5lckxpc3RHcm91cC5wcmVwZW5kKHRwbCk7XHJcbiAgICAgICAgYmFubmVySXRlbSA9IGJhbm5lckxpc3RHcm91cC5maW5kKFwiLmJhbm5lci1pdGVtOmZpcnN0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8v55uR5ZCs5LqL5Lu2XHJcbiAgICBzZWxmLmFkZEltYWdlU2VsZWN0KGJhbm5lckl0ZW0pO1xyXG4gICAgc2VsZi5hZGRSZW1vdmVCYW5uZXJFdmVudChiYW5uZXJJdGVtKTtcclxuICAgIHNlbGYuYWRkU2F2ZUJhbm5lckV2ZW50KGJhbm5lckl0ZW0pO1xyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUubG9hZERhdGEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvL+WKoOi9veWcqOaVsOaNruW6k+S4reWwseWtmOWcqOeahOaWsOmXu+i9ruaSreWbvlxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICd1cmwnOiAnL2Ntcy9iYW5uZXJfbGlzdC8nLFxyXG4gICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhbm5lcnMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmFubmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiYW5uZXIgPSBiYW5uZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlQmFubmVySXRlbShiYW5uZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufTtcclxuQmFubmVycy5wcm90b3R5cGUubGlzdGVuQWRkQmFubmVyRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgYWRkQnRuID0gJCgnI2FkZC1iYW5uZXJzLWJ0bicpO1xyXG4gICAgYWRkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+iwg+eUqOWIm+W7umJhbm5lcuaooeadv+WHveaVsFxyXG4gICAgICAgIHZhciBiYW5uZXJMaXN0R3JvdXAgPSAkKCcuYmFubmVyLWxpc3QtZ3JvdXAnKTtcclxuICAgICAgICB2YXIgbGVuZ3RoID0gYmFubmVyTGlzdEdyb3VwLmNoaWxkcmVuKCkubGVuZ3RoO1xyXG4gICAgICAgIGlmIChsZW5ndGggPj0gNikge1xyXG4gICAgICAgICAgICBzd2FsKHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAn5pyA5aSa5Y+q6IO95re75YqgNuW8oOi9ruaSreWbvu+8gScsXHJcbiAgICAgICAgICAgICAgICB0aW1lcjogMTEwMCxcclxuICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmNyZWF0ZUJhbm5lckl0ZW0oKTtcclxuICAgIH0pXHJcbn07XHJcbkJhbm5lcnMucHJvdG90eXBlLmFkZEltYWdlU2VsZWN0ID0gZnVuY3Rpb24gKGJhbm5lckl0ZW0pIHtcclxuICAgIHZhciBpbWFnZSA9IGJhbm5lckl0ZW0uZmluZCgnLnRodW1ibmFpbCcpO1xyXG4gICAgdmFyIGltYWdlSW5wdXQgPSBiYW5uZXJJdGVtLmZpbmQoJy5pbWFnZS1pbnB1dCcpO1xyXG5cclxuICAgIGltYWdlLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpbWFnZUlucHV0LmNsaWNrKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpbWFnZUlucHV0LmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xyXG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZChcImZpbGVcIiwgZmlsZSk7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvY21zL3VwbG9hZF9maWxlLycsXHJcbiAgICAgICAgICAgICdkYXRhJzogZm9ybURhdGEsXHJcbiAgICAgICAgICAgICdwcm9jZXNzRGF0YSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnY29udGVudFR5cGUnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2UuYXR0cignc3JjJywgdXJsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcbn07XHJcbkJhbm5lcnMucHJvdG90eXBlLmFkZFJlbW92ZUJhbm5lckV2ZW50ID0gZnVuY3Rpb24gKGJhbm5lckl0ZW0pIHtcclxuICAgIHZhciBjbG9zZUJ0biA9IGJhbm5lckl0ZW0uZmluZCgnLmNsb3NlLWJ0bicpO1xyXG5cclxuICAgIC8v54K55Ye75YWz6Zet5oyJ6ZKu77yM5Yik5pat5pWw5o2u5bqT5Lit5piv5ZCm5pyJYmFubmVySWRcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYmFubmVySWQgPSBiYW5uZXJJdGVtLmF0dHIoJ2RhdGEtYmFubmVyLWlkJyk7XHJcbiAgICAgICAgaWYgKGJhbm5lcklkKSB7XHJcbiAgICAgICAgICAgIHN3YWwoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIuaPkOekulwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IFwi5oKo56Gu5a6a5Yig6Zmk6L+Z5Liq6L2u5pKt5Zu+5ZCX77yfXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ3YXJuaW5nXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6IFwiI0RENkI1NVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBcIuehruWumuWIoOmZpO+8gVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlT25Db25maXJtOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAndXJsJzogJy9jbXMvZGVsZXRlX2Jhbm5lci8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiYW5uZXJfaWQnOiBiYW5uZXJJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2FsKFwi5Yig6Zmk77yBXCIsIFwi6K+l6L2u5pKt5Zu+5Yig6Zmk5oiQ5Yqf77yBXCIsIFwic3VjY2Vzc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mmL7npLrplJnor6/kv6Hmga9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2FsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHJlc3VsdFsnbWVzc2FnZSddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lcjogMTIwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL+WmguaenGJhbm5lcuaYr+i/mOacquWIm+W7uueahO+8jOWImeebtOaOpeWPr+S7peenu+mZpFxyXG4gICAgICAgICAgICBiYW5uZXJJdGVtLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn07XHJcblxyXG5cclxuQmFubmVycy5wcm90b3R5cGUuYWRkU2F2ZUJhbm5lckV2ZW50ID0gZnVuY3Rpb24gKGJhbm5lckl0ZW0pIHtcclxuICAgIHZhciBzYXZlQnRuID0gYmFubmVySXRlbS5maW5kKCcuc2F2ZS1idG4nKTtcclxuICAgIHZhciBpbWFnZVRhZyA9IGJhbm5lckl0ZW0uZmluZCgnLnRodW1ibmFpbCcpO1xyXG4gICAgdmFyIHByaW9yaXR5VGFnID0gYmFubmVySXRlbS5maW5kKFwiaW5wdXRbbmFtZT0ncHJpb3JpdHknXVwiKTtcclxuICAgIHZhciBsaW5rdG9UYWcgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdsaW5rX3RvJ11cIik7XHJcblxyXG4gICAgdmFyIHByaW9yaXR5U3BhbiA9IGJhbm5lckl0ZW0uZmluZCgnc3BhbltjbGFzcz1cInByaW9yaXR5XCJdJyk7XHJcblxyXG4gICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKFwiZGF0YS1iYW5uZXItaWRcIik7XHJcbiAgICB2YXIgdXJsID0gJyc7XHJcbiAgICAvL+WIpOaWreaYr+a3u+WKoOi/mOaYr+e8lui+kVxyXG4gICAgaWYgKGJhbm5lcklkKSB7XHJcbiAgICAgICAgdXJsID0gJy9jbXMvZWRpdF9iYW5uZXIvJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdXJsID0gJy9jbXMvYWRkX2Jhbm5lci8nO1xyXG4gICAgfVxyXG4gICAgc2F2ZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGltZ191cmwgPSBpbWFnZVRhZy5hdHRyKCdzcmMnKTtcclxuICAgICAgICB2YXIgcHJpb3JpdHkgPSBwcmlvcml0eVRhZy52YWwoKTtcclxuICAgICAgICB2YXIgbGlua190byA9IGxpbmt0b1RhZy52YWwoKTtcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogdXJsLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdwcmlvcml0eSc6IHByaW9yaXR5LFxyXG4gICAgICAgICAgICAgICAgJ2ltZ191cmwnOiBpbWdfdXJsLFxyXG4gICAgICAgICAgICAgICAgJ2xpbmtfdG8nOiBsaW5rX3RvLFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogYmFubmVySWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChiYW5uZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+aciWJhbm5lcmlk5Li65L+u5pS5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3YWwoe3RpdGxlOiAn6L2u5pKt5Zu+5L+u5pS55oiQ5Yqf77yBJywgdHlwZTogXCJzdWNjZXNzXCJ9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+e7keWummJhbm5lcmlk5Yiw5qCH562+5LiKXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbm5lcklkID0gcmVzdWx0WydkYXRhJ11bJ2Jhbm5lcl9pZCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXJJdGVtLmF0dHIoJ2RhdGEtYmFubmVyLWlkJywgYmFubmVySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2FsKHt0aXRsZTogJ+a3u+WKoOaIkOWKnyEnLCB0eXBlOiBcInN1Y2Nlc3NcIn0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvL+S/ruaUuXNwYW7moIfnrb7lhoXnmoTkvJjlhYjnuqfmloflrZdcclxuICAgICAgICAgICAgICAgICAgICBwcmlvcml0eVNwYW4udGV4dCgn5LyY5YWI57qnOicgKyBwcmlvcml0eSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdFsnbWVzc2FnZSddKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG5cclxuQmFubmVycy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5saXN0ZW5BZGRCYW5uZXJFdmVudCgpO1xyXG4gICAgdGhpcy5sb2FkRGF0YSgpO1xyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYmFubmVycyA9IG5ldyBCYW5uZXJzKCk7XHJcbiAgICBiYW5uZXJzLnJ1bigpO1xyXG59KTsiXX0=
