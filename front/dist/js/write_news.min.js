function News(){this.progressGroup=$("#progress-group")}News.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload"})},News.prototype.listenUploadFileEvent=function(){var o=$("#thumbnail-btn");o.change(function(){var e=o[0].files[0],t=new FormData;t.append("file",e),xfzajax.post({url:"/cms/upload_file/",data:t,processData:!1,contentType:!1,success:function(e){if(200===e.code){var t=e.data.url;$("#thumbnail-form").val(t)}}})})},News.prototype.listenQiniuUploadFileEvent=function(){var a=this;$("#thumbnail-btn").change(function(){$(".progress-bar").css({width:0});var s=this.files[0];xfzajax.get({url:"/cms/qntoken/",success:function(e){if(200!==e.code)swal({title:e.message,text:"2秒后自动关闭。",timer:2e3,showConfirmButton:!1});else{var t=e.data.token,o=(new Date).getTime()+"."+s.name.split(".")[1],n={fname:o,params:{},mimeType:["image/png","image/jpg","image/gif"]},i={useCdnDomain:!0,retryCount:6,region:qiniu.region.z0};qiniu.upload(s,o,t,n,i).subscribe({next:a.handleFileUploadProgress,error:a.handleFileUploadError,complete:a.handleFileUploadComplete})}}})})},News.prototype.handleFileUploadProgress=function(e){var t=e.total.percent,o=t.toFixed(0)+"%";console.log(t),$("#progress-group").show();var n=$(".progress-bar");n.css({width:t+"%"}),n.text(o)},News.prototype.handleFileUploadError=function(e){console.log(e.message),swal({title:result.message,text:"",timer:2e3,showConfirmButton:!1}),$("#progress-group").hide()},News.prototype.handleFileUploadComplete=function(e){console.log(e),$("#progress-group").hide();var t="http://7xqeu.com1.z0.glb.clouddn.com/"+e.key;$("input[name='thumbnail']").val(t)},News.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(e){e.preventDefault();var t=$(this).attr("data-news-id"),o=$('input[name="title"]').val(),n=$('select[name="category"]').val(),i=$("input[name='desc']").val(),s=$('input[name="thumbnail"]').val(),a=window.ue.getContent(),r="",l="";l=t?(r="/cms/edit_news/","新闻编辑成功！"):(r="/cms/write_news/","新闻发布成功！"),xfzajax.post({url:r,data:{title:o,category:n,desc:i,thumbnail:s,content:a,pk:t},success:function(e){200===e.code&&swal({title:l,type:"success"},function(){window.location.reload()})}})})},News.prototype.run=function(){var e=this;e.listenUploadFileEvent(),e.initUEditor(),e.listenSubmitEvent()},$(function(){(new News).run(),News.progressGroup=$("#progress-group")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInRoaXMiLCJwcm9ncmVzc0dyb3VwIiwiJCIsInByb3RvdHlwZSIsImluaXRVRWRpdG9yIiwid2luZG93IiwidWUiLCJVRSIsImdldEVkaXRvciIsImluaXRpYWxGcmFtZUhlaWdodCIsInNlcnZlclVybCIsImxpc3RlblVwbG9hZEZpbGVFdmVudCIsInVwbG9hZEJ0biIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwic3VjY2VzcyIsInJlc3VsdCIsInZhbCIsImxpc3RlblFpbml1VXBsb2FkRmlsZUV2ZW50Iiwic2VsZiIsImNzcyIsIndpZHRoIiwiZ2V0Iiwic3dhbCIsInRpdGxlIiwidGV4dCIsInRpbWVyIiwic2hvd0NvbmZpcm1CdXR0b24iLCJ0b2tlbiIsImtleSIsIkRhdGUiLCJnZXRUaW1lIiwibmFtZSIsInNwbGl0IiwicHV0RXh0cmEiLCJmbmFtZSIsInBhcmFtcyIsIm1pbWVUeXBlIiwiY29uZmlnIiwidXNlQ2RuRG9tYWluIiwicmV0cnlDb3VudCIsInJlZ2lvbiIsInFpbml1IiwiejAiLCJ1cGxvYWQiLCJzdWJzY3JpYmUiLCJuZXh0IiwiaGFuZGxlRmlsZVVwbG9hZFByb2dyZXNzIiwiZXJyb3IiLCJoYW5kbGVGaWxlVXBsb2FkRXJyb3IiLCJjb21wbGV0ZSIsImhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZSIsInJlc3BvbnNlIiwicGVyY2VudCIsInRvdGFsIiwicGVyY2VudFRleHQiLCJ0b0ZpeGVkIiwiY29uc29sZSIsImxvZyIsInNob3ciLCJwcm9ncmVzc0JhciIsIm1lc3NhZ2UiLCJoaWRlIiwibGlzdGVuU3VibWl0RXZlbnQiLCJjbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJwayIsImF0dHIiLCJjYXRlZ29yeSIsImRlc2MiLCJ0aHVtYm5haWwiLCJjb250ZW50IiwiZ2V0Q29udGVudCIsImFsZXJ0TWVzc2FnZSIsInR5cGUiLCJsb2NhdGlvbiIsInJlbG9hZCIsInJ1biJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsT0FDTEMsS0FBS0MsY0FBZ0JDLEVBQUUsbUJBRzNCSCxLQUFLSSxVQUFVQyxZQUFjLFdBQ3pCQyxPQUFPQyxHQUFLQyxHQUFHQyxVQUFVLFNBQVUsQ0FDL0JDLG1CQUFzQixJQUN0QkMsVUFBYSxxQkFLckJYLEtBQUtJLFVBQVVRLHNCQUF3QixXQUVuQyxJQUFJQyxFQUFZVixFQUFFLGtCQUVsQlUsRUFBVUMsT0FBTyxXQUViLElBQUlDLEVBQU9GLEVBQVUsR0FBR0csTUFBTSxHQUMxQkMsRUFBVyxJQUFJQyxTQUNuQkQsRUFBU0UsT0FBTyxPQUFRSixHQUN4QkssUUFBUUMsS0FBSyxDQUNUQyxJQUFPLG9CQUNQQyxLQUFRTixFQUNSTyxhQUFlLEVBQ2ZDLGFBQWUsRUFDZkMsUUFBVyxTQUFVQyxHQUNqQixHQUF1QixNQUFuQkEsRUFBYSxLQUFXLENBQ3hCLElBQUlMLEVBQU1LLEVBQWEsS0FBTyxJQUNUeEIsRUFBRSxtQkFDUnlCLElBQUlOLFVBT3ZDdEIsS0FBS0ksVUFBVXlCLDJCQUE2QixXQUV4QyxJQUFJQyxFQUFPN0IsS0FDS0UsRUFBRSxrQkFDUlcsT0FBTyxXQUNLWCxFQUFFLGlCQUNSNEIsSUFBSSxDQUFDQyxNQUFTLElBQzFCLElBQUlqQixFQUFPZCxLQUFLZSxNQUFNLEdBQ3RCSSxRQUFRYSxJQUFJLENBQ1JYLElBQU8sZ0JBQ1BJLFFBQVcsU0FBVUMsR0FDakIsR0FBdUIsTUFBbkJBLEVBQWEsS0FFYk8sS0FBSyxDQUNEQyxNQUFPUixFQUFnQixRQUN2QlMsS0FBTSxXQUNOQyxNQUFPLElBQ1BDLG1CQUFtQixRQUVwQixDQUNILElBQUlDLEVBQVFaLEVBQWEsS0FBUyxNQUU5QmEsR0FBTSxJQUFLQyxNQUFRQyxVQUFZLElBQU0zQixFQUFLNEIsS0FBS0MsTUFBTSxLQUFLLEdBQzFEQyxFQUFXLENBQ1hDLE1BQU9OLEVBQ1BPLE9BQVEsR0FDUkMsU0FBVSxDQUFDLFlBQWEsWUFBYSxjQUVyQ0MsRUFBUyxDQUNUQyxjQUFjLEVBQ2RDLFdBQVksRUFDWkMsT0FBUUMsTUFBTUQsT0FBT0UsSUFFUkQsTUFBTUUsT0FBT3hDLEVBQU15QixFQUFLRCxFQUFPTSxFQUFVSSxHQUMvQ08sVUFBVSxDQUNqQkMsS0FBUTNCLEVBQUs0Qix5QkFDYkMsTUFBUzdCLEVBQUs4QixzQkFDZEMsU0FBWS9CLEVBQUtnQyxrQ0FRekM5RCxLQUFLSSxVQUFVc0QseUJBQTJCLFNBQVVLLEdBQ2hELElBQ0lDLEVBRFFELEVBQVNFLE1BQ0RELFFBQ2hCRSxFQUFjRixFQUFRRyxRQUFRLEdBQUssSUFDdkNDLFFBQVFDLElBQUlMLEdBQ1E3RCxFQUFFLG1CQUNSbUUsT0FDZCxJQUFJQyxFQUFjcEUsRUFBRSxpQkFDcEJvRSxFQUFZeEMsSUFBSSxDQUFDQyxNQUFTZ0MsRUFBVSxNQUNwQ08sRUFBWW5DLEtBQUs4QixJQUdyQmxFLEtBQUtJLFVBQVV3RCxzQkFBd0IsU0FBVUQsR0FDN0NTLFFBQVFDLElBQUlWLEVBQU1hLFNBQ2xCdEMsS0FBSyxDQUNEQyxNQUFPUixPQUFnQixRQUN2QlMsS0FBTSxHQUNOQyxNQUFPLElBQ1BDLG1CQUFtQixJQUVIbkMsRUFBRSxtQkFDUnNFLFFBR2xCekUsS0FBS0ksVUFBVTBELHlCQUEyQixTQUFVQyxHQUNoREssUUFBUUMsSUFBSU4sR0FDUTVELEVBQUUsbUJBQ1JzRSxPQUdkLElBRUluRCxFQUZTLHdDQUNFeUMsRUFBU3ZCLElBRUhyQyxFQUFFLDJCQUNSeUIsSUFBSU4sSUFHdkJ0QixLQUFLSSxVQUFVc0Usa0JBQW9CLFdBQ2Z2RSxFQUFFLGVBQ1J3RSxNQUFNLFNBQVVDLEdBQ3RCQSxFQUFNQyxpQkFDTixJQUNJQyxFQURNM0UsRUFBRUYsTUFDQzhFLEtBQUssZ0JBRWQ1QyxFQUFRaEMsRUFBRSx1QkFBdUJ5QixNQUNqQ29ELEVBQVc3RSxFQUFFLDJCQUEyQnlCLE1BQ3hDcUQsRUFBTzlFLEVBQUUsc0JBQXNCeUIsTUFDL0JzRCxFQUFZL0UsRUFBRSwyQkFBMkJ5QixNQUN6Q3VELEVBQVU3RSxPQUFPQyxHQUFHNkUsYUFFcEI5RCxFQUFNLEdBQ04rRCxFQUFlLEdBR2ZBLEVBRkRQLEdBQ0N4RCxFQUFJLGtCQUNXLFlBRWZBLEVBQUksbUJBQ1csV0FFbkJGLFFBQVFDLEtBQUssQ0FDVEMsSUFBT0EsRUFDUEMsS0FBUSxDQUNKWSxNQUFTQSxFQUNUNkMsU0FBWUEsRUFDWkMsS0FBUUEsRUFDUkMsVUFBYUEsRUFDYkMsUUFBV0EsRUFDWEwsR0FBS0EsR0FFVHBELFFBQVcsU0FBVUMsR0FDTSxNQUFuQkEsRUFBYSxNQUNiTyxLQUFLLENBQUNDLE1BQU9rRCxFQUFjQyxLQUFNLFdBQVksV0FDekNoRixPQUFPaUYsU0FBU0MsaUJBUXhDeEYsS0FBS0ksVUFBVXFGLElBQU0sV0FDakIsSUFBSTNELEVBQU83QixLQUNYNkIsRUFBS2xCLHdCQUVMa0IsRUFBS3pCLGNBQ0x5QixFQUFLNEMscUJBSVR2RSxFQUFFLFlBQ2EsSUFBSUgsTUFDVnlGLE1BRUx6RixLQUFLRSxjQUFnQkMsRUFBRSIsImZpbGUiOiJ3cml0ZV9uZXdzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIE5ld3MoKSB7XHJcbiAgICB0aGlzLnByb2dyZXNzR3JvdXAgPSAkKFwiI3Byb2dyZXNzLWdyb3VwXCIpO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUuaW5pdFVFZGl0b3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB3aW5kb3cudWUgPSBVRS5nZXRFZGl0b3IoJ2VkaXRvcicsIHtcclxuICAgICAgICAnaW5pdGlhbEZyYW1lSGVpZ2h0JzogNDAwLFxyXG4gICAgICAgICdzZXJ2ZXJVcmwnOiAnL3VlZGl0b3IvdXBsb2FkJyxcclxuICAgIH0pO1xyXG5cclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmxpc3RlblVwbG9hZEZpbGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8v5LiK5Lyg5Yiw6Ieq5bex55qE5pyN5Yqh5ZmoXHJcbiAgICB2YXIgdXBsb2FkQnRuID0gJCgnI3RodW1ibmFpbC1idG4nKTtcclxuXHJcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+S4iuS8oOaMiemSruS4iuWPr+S7peacieWkmuS4quaWh+S7tlxyXG4gICAgICAgIHZhciBmaWxlID0gdXBsb2FkQnRuWzBdLmZpbGVzWzBdO1xyXG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy91cGxvYWRfZmlsZS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IGZvcm1EYXRhLFxyXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0WydkYXRhJ11bJ3VybCddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aHVtYm5haWxJbnB1dCA9ICQoJyN0aHVtYm5haWwtZm9ybScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbElucHV0LnZhbCh1cmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUubGlzdGVuUWluaXVVcGxvYWRGaWxlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvL+S4iuS8oOWIsOS4g+eJm+S6keacjeWKoeWZqFxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHVwbG9hZEJ0biA9ICQoJyN0aHVtYm5haWwtYnRuJyk7XHJcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcHJvZ3Jlc3NCYXIgPSAkKCcucHJvZ3Jlc3MtYmFyJyk7XHJcbiAgICAgICAgcHJvZ3Jlc3NCYXIuY3NzKHsnd2lkdGgnOiAwfSk7XHJcbiAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvY21zL3FudG9rZW4vJyxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gIT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5pi+56S66ZSZ6K+v5L+h5oGvXHJcbiAgICAgICAgICAgICAgICAgICAgc3dhbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXN1bHRbJ21lc3NhZ2UnXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogXCIy56eS5ZCO6Ieq5Yqo5YWz6Zet44CCXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyOiAyMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VuID0gcmVzdWx0WydkYXRhJ11bJ3Rva2VuJ107XHJcbiAgICAgICAgICAgICAgICAgICAgLy9hLmpwZyA9IFsnYSc6J2pwZyddXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCkgKyAnLicgKyBmaWxlLm5hbWUuc3BsaXQoJy4nKVsxXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHV0RXh0cmEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuYW1lOiBrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBbJ2ltYWdlL3BuZycsICdpbWFnZS9qcGcnLCAnaW1hZ2UvZ2lmJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VDZG5Eb21haW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJ5Q291bnQ6IDYsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcWluaXUucmVnaW9uLnowXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IHFpbml1LnVwbG9hZChmaWxlLCBrZXksIHRva2VuLCBwdXRFeHRyYSwgY29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZhYmxlLnN1YnNjcmliZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0Jzogc2VsZi5oYW5kbGVGaWxlVXBsb2FkUHJvZ3Jlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdlcnJvcic6IHNlbGYuaGFuZGxlRmlsZVVwbG9hZEVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnY29tcGxldGUnOiBzZWxmLmhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUuaGFuZGxlRmlsZVVwbG9hZFByb2dyZXNzID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICB2YXIgdG90YWwgPSByZXNwb25zZS50b3RhbDtcclxuICAgIHZhciBwZXJjZW50ID0gdG90YWwucGVyY2VudDtcclxuICAgIHZhciBwZXJjZW50VGV4dCA9IHBlcmNlbnQudG9GaXhlZCgwKSArICclJztcclxuICAgIGNvbnNvbGUubG9nKHBlcmNlbnQpO1xyXG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSAkKCcjcHJvZ3Jlc3MtZ3JvdXAnKTtcclxuICAgIHByb2dyZXNzR3JvdXAuc2hvdygpO1xyXG4gICAgdmFyIHByb2dyZXNzQmFyID0gJCgnLnByb2dyZXNzLWJhcicpO1xyXG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHsnd2lkdGgnOiBwZXJjZW50ICsgJyUnfSk7XHJcbiAgICBwcm9ncmVzc0Jhci50ZXh0KHBlcmNlbnRUZXh0KTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRFcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICBzd2FsKHtcclxuICAgICAgICB0aXRsZTogcmVzdWx0WydtZXNzYWdlJ10sXHJcbiAgICAgICAgdGV4dDogXCJcIixcclxuICAgICAgICB0aW1lcjogMjAwMCxcclxuICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2VcclxuICAgIH0pO1xyXG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSAkKCcjcHJvZ3Jlc3MtZ3JvdXAnKTtcclxuICAgIHByb2dyZXNzR3JvdXAuaGlkZSgpO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUuaGFuZGxlRmlsZVVwbG9hZENvbXBsZXRlID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9ICQoJyNwcm9ncmVzcy1ncm91cCcpO1xyXG4gICAgcHJvZ3Jlc3NHcm91cC5oaWRlKCk7XHJcblxyXG4gICAgLy/ln5/lkI0g5LiD54mb5LiKXHJcbiAgICB2YXIgZG9tYWluID0gJ2h0dHA6Ly83eHFldS5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS8nO1xyXG4gICAgdmFyIGZpbGVuYW1lID0gcmVzcG9uc2Uua2V5O1xyXG4gICAgdmFyIHVybCA9IGRvbWFpbiArIGZpbGVuYW1lO1xyXG4gICAgdmFyIHRodW1ibmFpbElucHV0ID0gJChcImlucHV0W25hbWU9J3RodW1ibmFpbCddXCIpO1xyXG4gICAgdGh1bWJuYWlsSW5wdXQudmFsKHVybCk7XHJcbn07XHJcblxyXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5TdWJtaXRFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzdWJtaXRCdG4gPSAkKCcjc3VibWl0LWJ0bicpO1xyXG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHBrID0gYnRuLmF0dHIoJ2RhdGEtbmV3cy1pZCcpO1xyXG5cclxuICAgICAgICB2YXIgdGl0bGUgPSAkKCdpbnB1dFtuYW1lPVwidGl0bGVcIl0nKS52YWwoKTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnkgPSAkKCdzZWxlY3RbbmFtZT1cImNhdGVnb3J5XCJdJykudmFsKCk7XHJcbiAgICAgICAgdmFyIGRlc2MgPSAkKFwiaW5wdXRbbmFtZT0nZGVzYyddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciB0aHVtYm5haWwgPSAkKCdpbnB1dFtuYW1lPVwidGh1bWJuYWlsXCJdJykudmFsKCk7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB3aW5kb3cudWUuZ2V0Q29udGVudCgpO1xyXG5cclxuICAgICAgICB2YXIgdXJsID0gJyc7XHJcbiAgICAgICAgdmFyIGFsZXJ0TWVzc2FnZSA9ICcnO1xyXG4gICAgICAgIGlmKHBrKXtcclxuICAgICAgICAgICAgdXJsPScvY21zL2VkaXRfbmV3cy8nO1xyXG4gICAgICAgICAgICBhbGVydE1lc3NhZ2UgPSAn5paw6Ze757yW6L6R5oiQ5Yqf77yBJ1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB1cmw9Jy9jbXMvd3JpdGVfbmV3cy8nO1xyXG4gICAgICAgICAgICBhbGVydE1lc3NhZ2UgPSAn5paw6Ze75Y+R5biD5oiQ5Yqf77yBJ1xyXG4gICAgICAgIH1cclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogdXJsLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICd0aXRsZSc6IHRpdGxlLFxyXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5JzogY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICAnZGVzYyc6IGRlc2MsXHJcbiAgICAgICAgICAgICAgICAndGh1bWJuYWlsJzogdGh1bWJuYWlsLFxyXG4gICAgICAgICAgICAgICAgJ2NvbnRlbnQnOiBjb250ZW50LFxyXG4gICAgICAgICAgICAgICAgJ3BrJzpwa1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dhbCh7dGl0bGU6IGFsZXJ0TWVzc2FnZSwgdHlwZTogXCJzdWNjZXNzXCJ9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5VcGxvYWRGaWxlRXZlbnQoKTtcclxuICAgIC8vIHNlbGYubGlzdGVuUWluaXVVcGxvYWRGaWxlRXZlbnQoKTtcclxuICAgIHNlbGYuaW5pdFVFZGl0b3IoKTtcclxuICAgIHNlbGYubGlzdGVuU3VibWl0RXZlbnQoKTtcclxufTtcclxuXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBuZXdzID0gbmV3IE5ld3MoKTtcclxuICAgIG5ld3MucnVuKCk7XHJcblxyXG4gICAgTmV3cy5wcm9ncmVzc0dyb3VwID0gJCgnI3Byb2dyZXNzLWdyb3VwJyk7XHJcbn0pOyJdfQ==
